From 524fb6dff39c6a22bfa6f8a21ab601cad314a88b Mon Sep 17 00:00:00 2001
From: Azril Ahmad <mohd.azril.ahmad@intel.com>
Date: Thu, 6 Jan 2022 19:17:29 +0700
Subject: [PATCH 2/2] Change primary DRI device to 129 as to make dlstreamer
 works on SRIOV VM

---
 .../async_with_va_api/va_api_wrapper/vaapi_utils.cpp            | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/inference_backend/image_inference/async_with_va_api/va_api_wrapper/vaapi_utils.cpp b/inference_backend/image_inference/async_with_va_api/va_api_wrapper/vaapi_utils.cpp
index 5f52a96..546dc84 100644
--- a/inference_backend/image_inference/async_with_va_api/va_api_wrapper/vaapi_utils.cpp
+++ b/inference_backend/image_inference/async_with_va_api/va_api_wrapper/vaapi_utils.cpp
@@ -73,7 +73,7 @@ void initializeVaDisplay(VaDpyWrapper display) {
 } // namespace
 
 VaApiDisplayPtr vaApiCreateVaDisplay(uint32_t relative_device_index) {
-    constexpr uint32_t SYSTEM_DEV_ID = 128;
+    constexpr uint32_t SYSTEM_DEV_ID = 129;
     std::string device_path = "/dev/dri/renderD" + std::to_string(SYSTEM_DEV_ID + relative_device_index);
 
     int dri_file_descriptor = open(device_path.c_str(), O_RDWR);
-- 
2.30.2

